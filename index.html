<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutfinder</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f8f9fa;
        }

        h1 {
            font-size: 3rem;
            color: #333;
            margin-bottom: 20px;
        }

        .search-bar {
            display: flex;
            width: 50%;
            max-width: 600px;
            border: 1px solid #ccc;
            border-radius: 25px;
            overflow: hidden;
            background-color: #fff;
        }

        .search-bar input {
            flex: 1;
            padding: 10px 15px;
            border: none;
            outline: none;
            font-size: 1rem;
        }

        .search-bar button {
            padding: 10px 20px;
            border: none;
            background-color: #4285f4;
            color: white;
            font-size: 1rem;
            cursor: pointer;
        }

        .search-bar button:hover {
            background-color: #357ae8;
        }

        /* Dropdown styles */
        #dropdown {
            position: relative;
            width: 50%;
            max-width: 600px;
            margin: 24px auto 0 auto; /* 24px space at the top */
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 32px; /* Fully rounded corners */
            box-shadow: 0 8px 24px rgba(0,0,0,0.08), 0 1.5px 4px rgba(0,0,0,0.05);
            z-index: 1000;
            display: none;
            max-height: 220px;
            overflow-y: auto;
            transition: box-shadow 0.2s;
            padding: 4px 0; /* Optional: a bit of vertical space inside */
        }
        #dropdown div {
            padding: 12px 18px;
            cursor: pointer;
            font-size: 1rem;
            color: #333;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.15s, color 0.15s;
            text-align: left;
            border-radius: 24px; /* Rounded for each option */
            margin: 2px 8px;
        }
        #dropdown div:last-child {
            border-bottom: none;
        }
        #dropdown div:hover, #dropdown .active {
            background: #e3f0fd;
            color: #1976d2;
        }
        #dropdown:empty {
            display: none;
        }

        .clear-btn {
            margin-top: 15px;
            padding: 6px 14px;
            border: none;
            background-color: #e53935;
            color: #fff;
            font-size: 0.8rem;
            border-radius: 20px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .clear-btn:hover {
            background-color: #b71c1c;
        }
        .bottom-left-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            margin-top: 0;
            z-index: 1001;
        }

        /* Form styles */
        form {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            width: 50%;
            max-width: 600px;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        form input {
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
        }
        form button {
            padding: 10px;
            border: none;
            background-color: #28a745;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 4px;
        }
        form button:hover {
            background-color: #218838;
        }
    </style>
</head>
<body>
    
    <h1>Tutfinder</h1>
    <div class="search-bar">
        <input id="searchBar" type="text" placeholder="Search for tutorials..." autocomplete="off" />
        <button id="searchButton">Search</button>
    </div>
    <div id="dropdown" style="position: relative; width: 50%; max-width: 600px;"></div>

    <button id="clearSuggestionsButton" class="clear-btn bottom-left-btn">Remove all suggestions</button>

    <!-- Add inside <body> of index.html -->
    <form action="/create-page" method="POST" style="margin-bottom:20px;">
      <input name="title" placeholder="Page Title" required>
      <input name="categories" placeholder="Categories (comma separated)" required>
      <button type="submit">Create Page</button>
    </form>

    <!-- Link the JavaScript file -->
    <script src="main.js"></script>
    <!-- Add this script at the end of your body in index.html -->
<script>
document.getElementById('searchButton').onclick = function(e) {
  e.preventDefault();
  const title = document.getElementById('searchBar').value.trim();
  if (!title) return;

  // You can customize categories as needed, here is an example for Math
  let categories = [];
  if (title.toLowerCase() === "math") {
    categories = ["Algebra", "Geometry", "Calculus", "Statistics"];
  } else {
    categories = ["General"];
  }

  fetch('/create-page', {
    method: 'POST',
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
    body: `title=${encodeURIComponent(title)}&categories=${encodeURIComponent(categories.join(','))}`
  })
  .then(response => {
    // Redirect to the new page (the server redirects, so we follow)
    if (response.redirected) {
      window.location.href = response.url;
    }
  });
};
</script>
</body>
</html>